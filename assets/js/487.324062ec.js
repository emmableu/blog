(window.webpackJsonp=window.webpackJsonp||[]).push([[487],{859:function(e,v,_){"use strict";_.r(v);var t=_(9),d=Object(t.a)({},(function(){var e=this,v=e._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"pytorch-张量操作讲解-item-、-squeeze-、-unsqueeze"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#pytorch-张量操作讲解-item-、-squeeze-、-unsqueeze"}},[e._v("#")]),e._v(" PyTorch 张量操作讲解："),v("code",[e._v(".item()")]),e._v("、"),v("code",[e._v(".squeeze()")]),e._v("、"),v("code",[e._v(".unsqueeze()")])]),e._v(" "),v("p",[e._v("本笔记总结了 PyTorch 中三个常用张量操作："),v("code",[e._v(".item()")]),e._v("、"),v("code",[e._v(".squeeze()")]),e._v("、"),v("code",[e._v(".unsqueeze()")]),e._v("，包括输入输出示例、类型说明、使用场景。")]),e._v(" "),v("hr"),e._v(" "),v("h2",{attrs:{id:"✅-item-和-squeeze-对比表"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#✅-item-和-squeeze-对比表"}},[e._v("#")]),e._v(" ✅ "),v("code",[e._v(".item()")]),e._v(" 和 "),v("code",[e._v(".squeeze()")]),e._v(" 对比表")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("操作")]),e._v(" "),v("th",[e._v("示例张量 "),v("code",[e._v("x")])]),e._v(" "),v("th",[e._v("操作代码")]),e._v(" "),v("th",[e._v("结果")]),e._v(" "),v("th",[e._v("类型")]),e._v(" "),v("th",[e._v("用途说明")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("item()")])]),e._v(" "),v("td",[v("code",[e._v("x = torch.tensor(5.0)")])]),e._v(" "),v("td",[v("code",[e._v("x.item()")])]),e._v(" "),v("td",[v("code",[e._v("5.0")])]),e._v(" "),v("td",[e._v("Python float")]),e._v(" "),v("td",[e._v("将只有一个元素的标量张量转换成 Python 标量（float、int）")])]),e._v(" "),v("tr",[v("td"),e._v(" "),v("td",[v("code",[e._v("x = torch.tensor([7])")])]),e._v(" "),v("td",[v("code",[e._v("x.item()")])]),e._v(" "),v("td",[v("code",[e._v("7")])]),e._v(" "),v("td",[e._v("Python int")]),e._v(" "),v("td",[e._v("注意只能用于单元素张量，否则报错")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("squeeze()")])]),e._v(" "),v("td",[v("code",[e._v("x = torch.tensor([[1.0]])")])]),e._v(" "),v("td",[v("code",[e._v("x.squeeze()")])]),e._v(" "),v("td",[v("code",[e._v("tensor(1.)")])]),e._v(" "),v("td",[e._v("Tensor(0-D)")]),e._v(" "),v("td",[e._v("去除所有维度为1的维度，变成标量张量")])]),e._v(" "),v("tr",[v("td"),e._v(" "),v("td",[v("code",[e._v("x = torch.tensor([[[2.0]]])")])]),e._v(" "),v("td",[v("code",[e._v("x.squeeze()")])]),e._v(" "),v("td",[v("code",[e._v("tensor(2.)")])]),e._v(" "),v("td",[e._v("Tensor(0-D)")]),e._v(" "),v("td",[e._v("会递归删除所有维度为1的轴")])]),e._v(" "),v("tr",[v("td"),e._v(" "),v("td",[v("code",[e._v("x = torch.tensor([[1.0, 2.0]])")])]),e._v(" "),v("td",[v("code",[e._v("x.squeeze()")])]),e._v(" "),v("td",[v("code",[e._v("tensor([1., 2.])")])]),e._v(" "),v("td",[e._v("Tensor(1-D)")]),e._v(" "),v("td",[e._v("只去除第一个维度，(1, 2) → (2,)")])]),e._v(" "),v("tr",[v("td"),e._v(" "),v("td",[v("code",[e._v("x = torch.randn(1, 3, 1, 5)")])]),e._v(" "),v("td",[v("code",[e._v("x.squeeze()")])]),e._v(" "),v("td",[v("code",[e._v("shape: (3, 5)")])]),e._v(" "),v("td",[e._v("Tensor(2-D)")]),e._v(" "),v("td",[e._v("所有 size 为1 的维度都被移除")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v(".squeeze(0)")])]),e._v(" "),v("td",[v("code",[e._v("x = torch.tensor([[3.0, 4.0]])")])]),e._v(" "),v("td",[v("code",[e._v("x.squeeze(0)")])]),e._v(" "),v("td",[v("code",[e._v("tensor([3., 4.])")])]),e._v(" "),v("td",[e._v("Tensor(1-D)")]),e._v(" "),v("td",[e._v("仅尝试去除指定维度（0轴），如果该维度不是1，不会动")])]),e._v(" "),v("tr",[v("td",[e._v("❌ 错误使用")]),e._v(" "),v("td",[v("code",[e._v("x = torch.tensor([1.0, 2.0])")])]),e._v(" "),v("td",[v("code",[e._v("x.item()")])]),e._v(" "),v("td",[e._v("报错：多元素 tensor 无法使用 "),v("code",[e._v(".item()")])]),e._v(" "),v("td",[e._v("—")]),e._v(" "),v("td",[v("code",[e._v(".item()")]),e._v(" 只适用于单元素张量")])])])]),e._v(" "),v("hr"),e._v(" "),v("h2",{attrs:{id:"🔁-unsqueeze-增加维度的反操作"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#🔁-unsqueeze-增加维度的反操作"}},[e._v("#")]),e._v(" 🔁 "),v("code",[e._v(".unsqueeze()")]),e._v("：增加维度的反操作")]),e._v(" "),v("p",[v("code",[e._v(".unsqueeze(dim)")]),e._v(" 会在指定维度插入一个大小为 1 的维度，常用于对齐 shape，比如给 CNN 输入加 batch 维。")]),e._v(" "),v("table",[v("thead",[v("tr",[v("th",[e._v("示例张量 "),v("code",[e._v("x")])]),e._v(" "),v("th",[e._v("操作代码")]),e._v(" "),v("th",[e._v("结果张量形状 / 值")]),e._v(" "),v("th",[e._v("说明")])])]),e._v(" "),v("tbody",[v("tr",[v("td",[v("code",[e._v("tensor([1.0, 2.0])")])]),e._v(" "),v("td",[v("code",[e._v("x.unsqueeze(0)")])]),e._v(" "),v("td",[v("code",[e._v("shape: (1, 2)")])]),e._v(" "),v("td",[e._v("增加 batch 维")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("tensor([1.0, 2.0])")])]),e._v(" "),v("td",[v("code",[e._v("x.unsqueeze(1)")])]),e._v(" "),v("td",[v("code",[e._v("shape: (2, 1)")])]),e._v(" "),v("td",[e._v("转成列向量")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("tensor(3.0)")])]),e._v(" "),v("td",[v("code",[e._v("x.unsqueeze(0)")])]),e._v(" "),v("td",[v("code",[e._v("shape: (1,)")])]),e._v(" "),v("td",[e._v("标量 → 一维向量")])]),e._v(" "),v("tr",[v("td",[v("code",[e._v("tensor([[1.0, 2.0]])")])]),e._v(" "),v("td",[v("code",[e._v("x.unsqueeze(2)")])]),e._v(" "),v("td",[v("code",[e._v("shape: (1, 2, 1)")])]),e._v(" "),v("td",[e._v("每个元素增加一维")])])])]),e._v(" "),v("hr"),e._v(" "),v("h2",{attrs:{id:"✅-使用建议"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#✅-使用建议"}},[e._v("#")]),e._v(" ✅ 使用建议")]),e._v(" "),v("ul",[v("li",[v("code",[e._v(".squeeze()")]),e._v(" 和 "),v("code",[e._v(".unsqueeze()")]),e._v(" 经常配合使用，例如：\n"),v("ul",[v("li",[e._v("把 "),v("code",[e._v("[B, C, H, W]")]),e._v(" 转换为 "),v("code",[e._v("[B, H*W]")]),e._v(" 时 "),v("code",[e._v(".squeeze()")])]),e._v(" "),v("li",[e._v("推理时对 "),v("code",[e._v("[C, H, W]")]),e._v(" 加 batch 维 "),v("code",[e._v(".unsqueeze(0)")])])])]),e._v(" "),v("li",[v("code",[e._v(".item()")]),e._v(" 用于将标量张量变成 Python 类型（用于日志、print、转 numpy）")])]),e._v(" "),v("hr")])}),[],!1,null,null,null);v.default=d.exports}}]);