(window.webpackJsonp=window.webpackJsonp||[]).push([[503],{875:function(e,t,a){"use strict";a.r(t);var s=a(9),r=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"problem-statement"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#problem-statement"}},[e._v("#")]),e._v(" Problem Statement:")]),e._v(" "),t("p",[e._v("display media (movie/show) recommendations for a Netflix user. Your task is to make recommendations in such a manner that the chance of the user watching them is maximized.")]),e._v(" "),t("h3",{attrs:{id:"explicit-v-s-implicit-feedback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#explicit-v-s-implicit-feedback"}},[e._v("#")]),e._v(" Explicit v.s. Implicit Feedback")]),e._v(" "),t("p",[e._v("Generally, there are two types of feedback coming from an end-user for a given recommendation.\n"),t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-0.png",alt:""}})]),e._v(" "),t("p",[e._v("Explicit feedback faces the missing not at random (MNAR) problem. Users will generally rate those media recommendations that they liked. This means 4/5, 5/5 star ranking are more common than 1/5, 2/5 or 3/5.")]),e._v(" "),t("h2",{attrs:{id:"architectural-components"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#architectural-components"}},[e._v("#")]),e._v(" Architectural Components")]),e._v(" "),t("p",[e._v("we split the recommendation task into two stages.")]),e._v(" "),t("ul",[t("li",[e._v("Stage 1: Candidate generation")]),e._v(" "),t("li",[e._v("Stage 2: Ranking of generated candidates")])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-1.png",alt:""}})]),e._v(" "),t("h2",{attrs:{id:"metrics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#metrics"}},[e._v("#")]),e._v(" Metrics")]),e._v(" "),t("h3",{attrs:{id:"online-v-s-offline-metrics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#online-v-s-offline-metrics"}},[e._v("#")]),e._v(" Online v.s. Offline metrics")]),e._v(" "),t("p",[e._v("Online metrics are used to see the system’s performance through online evaluations on live data during an A/B test.")]),e._v(" "),t("p",[e._v("Offline metrics are used in offline evaluations, which simulate the model’s performance in the production environment.")]),e._v(" "),t("p",[e._v("We might train multiple models and tune and test them offline with the held-out test data (historical interaction of users with recommended media). If its performance gain is worth the engineering effort to bring it into a production environment, the best performing model will then be selected for an online A/B test on live data.")]),e._v(" "),t("h3",{attrs:{id:"online-metrics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#online-metrics"}},[e._v("#")]),e._v(" online metrics:")]),e._v(" "),t("ol",[t("li",[e._v("engagement rate: (# sessions with clicks)/(total # sessions) (点进去的video数量/总共的video数量). However, the user might click on a recommended movie but does not find it interesting enough to complete watching it.")]),e._v(" "),t("li",[e._v("videos watched: # videos that the user has spent at least a significant time watching (e.g., more than two minutes)."),t("br"),e._v("\nHowever, this metric can be problematic when it comes to the user starting to watch movie/series recommendations but not finding them interesting enough to finish them.")]),e._v(" "),t("li",[t("strong",[e._v("session watch time")]),e._v(": Session watch time measures the overall time a user spends watching content based on recommendations in a session. This is the best comparing to 1 and 2, because user may watch one video for 90 minutes in one session among all the videos.")])]),e._v(" "),t("h3",{attrs:{id:"offline-metrics"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#offline-metrics"}},[e._v("#")]),e._v(" offline metrics:")]),e._v(" "),t("h4",{attrs:{id:"mean-average-precision-map-n"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mean-average-precision-map-n"}},[e._v("#")]),e._v(" Mean Average Precision(mAP @ N).")]),e._v(" "),t("p",[e._v("Assume the following:")]),e._v(" "),t("ul",[t("li",[e._v("The system recommended N = 5 movies.")]),e._v(" "),t("li",[e._v("The user watched three movies from this recommendation list and ignored the other two.")]),e._v(" "),t("li",[e._v("Among all the possible movies that the system could have recommended (available on the Netflix platform), only m = 10 are actually relevant to the user (historical data).\n"),t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-11.png",alt:""}})])]),e._v(" "),t("p",[e._v("Lastly, the “mean” in mAP means that we will calculate the AP with respect to each user’s ratings and take their mean. So, mAP computes the metric for a large set of users to see how the system performs overall on a large set.")]),e._v(" "),t("h4",{attrs:{id:"mean-average-recall-mar-n"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mean-average-recall-mar-n"}},[e._v("#")]),e._v(" Mean Average Recall (mAR @ N)")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-12.png",alt:""}})]),e._v(" "),t("h4",{attrs:{id:"f1-score"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#f1-score"}},[e._v("#")]),e._v(" F1 score")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-13.png",alt:""}})]),e._v(" "),t("h4",{attrs:{id:"rmse-for-optimizing-ratings"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rmse-for-optimizing-ratings"}},[e._v("#")]),e._v(" RMSE for optimizing ratings")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/linear-regression-14.png",alt:""}}),e._v(" "),t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/linear-regression-12.png",alt:""}}),e._v(" "),t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/linear-regression-13.png",alt:""}})]),e._v(" "),t("h2",{attrs:{id:"feature-engineering"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#feature-engineering"}},[e._v("#")]),e._v(" Feature engineering")]),e._v(" "),t("h3",{attrs:{id:"user-based-features"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#user-based-features"}},[e._v("#")]),e._v(" User-based features")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-2.png",alt:""}}),e._v(" "),t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-3.png",alt:""}})]),e._v(" "),t("h3",{attrs:{id:"context-based-features"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#context-based-features"}},[e._v("#")]),e._v(" Context-based features")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-4.png",alt:""}})]),e._v(" "),t("h3",{attrs:{id:"media-based-features"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#media-based-features"}},[e._v("#")]),e._v(" Media-based features")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-5.png",alt:""}}),e._v(" "),t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-6.png",alt:""}})]),e._v(" "),t("h3",{attrs:{id:"media-user-cross-features"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#media-user-cross-features"}},[e._v("#")]),e._v(" Media-user cross features")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-7.png",alt:""}}),e._v(" "),t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-8.png",alt:""}})]),e._v(" "),t("h3",{attrs:{id:"other-sparse-features"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#other-sparse-features"}},[e._v("#")]),e._v(" Other sparse features")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-9.png",alt:""}}),e._v(" "),t("img",{attrs:{src:"https://raw.githubusercontent.com/emmableu/image/master/recommendation-system-design-10.png",alt:""}})])])}),[],!1,null,null,null);t.default=r.exports}}]);